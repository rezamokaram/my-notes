# Boot the System

## üêß Linux Boot Process (From Power-On to Running Applications)

### üîå 1. Power On

- Electricity is supplied to the system.
- The Power Supply Unit (PSU) powers the motherboard and CPU.
- The CPU starts executing code from a predefined location.

---

### üß† 2. BIOS / UEFI Execution

the firmware on the motherboard can be BIOS or UEFI.

- BIOS (legacy) or UEFI (modern systems) firmware starts running.
- Performs **POST (Power-On Self Test)**.
- Detects and initializes hardware components (RAM, drives, etc.).
- Finds the bootable device (HDD, SSD, USB, etc.).

#### BIOS

- Loads the **MBR (Master Boot Record)** at sector 0 of the boot device.
- MBR contains the bootloader (e.g. GRUB legacy).

#### UEFI

- Looks for the **EFI System Partition (ESP)**.
- Loads the bootloader EFI executable (e.g. `grubx64.efi`).

---

### ü•æ 3. Bootloader Stage (e.g. GRUB)

- Bootloader code is executed.
- Displays boot menu (if present).
- Loads the **Linux kernel** (e.g. `vmlinuz-...`) into memory.
- Loads **initrd/initramfs** (Initial RAM disk).
- Passes **kernel parameters** (like `root=/dev/sda1`) to the kernel.
- Transfers control to the kernel.

---

### üß¨ 4. Kernel Initialization

- Kernel decompresses itself into memory.
- Initializes:
  - CPU
  - Memory
  - Device drivers
  - Filesystems
- Mounts **initramfs/initrd** as temporary root.
- Executes `/init` inside initramfs:
  - Loads necessary kernel modules.
  - Finds and mounts the **real root filesystem** (e.g. `/dev/sda2`).
- Switches from initramfs to the real root filesystem.

---

### üßæ 5. Init System (PID 1)

- Kernel executes the **first userspace process**, typically:

  | Init System | Binary Path                      |
  |-------------|----------------------------------|
  | systemd     | `/lib/systemd/systemd`           |
  | SysVinit    | `/sbin/init`                     |
  | Upstart     | `/sbin/init`                     |
  | Others      | Custom init binaries             |

#### Init system tasks:

- Mount additional filesystems (`/etc/fstab`).
- Set hostname, locale, and time.
- Start essential daemons (udev, dbus, networking).
- Start login services (TTY, SSH, GUI login).
- Start target-defined services (multi-user, graphical, etc.).

---

### üéõÔ∏è 6. User Login and Applications Start

- System reaches a **target** (e.g., `multi-user.target`, `graphical.target`).
- Login prompts (shell or GUI) appear.
- Background services (web servers, cron, etc.) start.
- User applications can now be started.

---

### üìä Summary Diagram

```plaintext
Power On
  ‚Üì
BIOS / 
  ‚Üì
Bootloader (GRUB, systemd-boot, etc.)
  ‚Üì
Kernel (vmlinuz + initramfs)
  ‚Üì
Kernel initializes, mounts real root fs
  ‚Üì
Init system (systemd, init, etc.)
  ‚Üì
User-space services and applications
```
